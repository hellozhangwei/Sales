<screen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://moqui.org/xsd/xml-screen-2.1.xsd"
        default-menu-title="View Account">
    <parameter name="partyId" required="true"/>
    <subscreens default-item="Activity"/>
    <pre-actions><set field="partyId" from="partyId"/></pre-actions>
    <actions>
        <!-- this approach is the same as what is used in EditParty screen -->
        <entity-find-one entity-name="mantle.party.PartyDetail" value-field="party"/>
        <if condition="party == null"><return error="true" message="Party not found with ID ${partyId}"/></if>
        <!-- This approach uses Elastic and is the way FindParty and FindCustomer screens work. Use one or the other, not both.-->
        <service-call name="mantle.party.PartyServices.search#Party" in-map="context" out-map="context"/>
    </actions>
    <widgets>
        <label text="It worked!" type="h4"/>
        <container-row>
            <row-col lg="3">
                <section name="PartySummarySection">
                    <actions>
                        <!-- this approach is the same as what is used in EditParty screen -->
                        <service-call name="mantle.party.ContactServices.get#PartyContactInfoList" out-map="contactOut"
                                      in-map="[partyId:partyId, getAll:true]"/>
                    </actions>
                    <widgets>
                        <container-box type="default"><box-header title="Account Summary"/>
                            <box-body>
                                <!-- Display primary website and phone -->
                                <label text="${party.organizationName}" type="p"/>
                                <label text="${documentList?.size()}"/>
                                <form-list name="AccountSummary" list="documentList">
                                    <field name="partyId"><default-field><display text="organizationName"/>
                                    </default-field></field>
                                </form-list>
                            </box-body>
                        </container-box>
                    </widgets>
                </section>
            </row-col>
            <row-col lg="6">
                <subscreens-panel id="CenterPanel" type="tab"/>
            </row-col>
            <row-col lg="3">
                <section name="ContactSection">
                    <widgets>
                        <container-box type="default"><box-header title="Contacts"/>
                        </container-box>
                    </widgets>
                </section>
            </row-col>
        </container-row>
    </widgets>
</screen>